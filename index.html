<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Card√°pio Interativo</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      margin: 20px;
    }
    h1 {
      text-align: center;
      margin-bottom: 30px;
    }
    ul.cardapio, ul#carrinho {
      max-width: 600px;
      margin: 0 auto 20px;
      padding: 0;
      list-style: none;
    }
    ul.cardapio li, ul#carrinho li {
      background: white;
      padding: 15px 20px;
      margin-bottom: 10px;
      border-radius: 8px;
      box-shadow: 0 0 5px #ccc;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .info-prato {
      max-width: 75%;
    }
    .nome-prato {
      font-weight: bold;
      font-size: 18px;
      margin: 0 0 6px 0;
    }
    .descricao {
      margin: 0;
      color: #555;
      font-size: 0.9em;
    }
    .preco {
      font-weight: bold;
      font-size: 16px;
      color: #2a7a2a;
    }
    .botoes {
      text-align: center;
      margin-top: 20px;
    }
    .botoes button {
      margin: 5px;
      padding: 10px 15px;
      font-size: 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    #btnWhatsApp {
      background-color: #25d366;
      color: white;
    }
    #btnPrint {
      background-color: #333;
      color: white;
    }
    #tituloCarrinho {
      text-align: center;
      margin-top: 30px;
      font-size: 20px;
      color: #444;
    }
    #totalPedido {
      text-align: center;
      font-weight: bold;
      font-size: 18px;
      color: #2a7a2a;
    }
    .remover-btn {
      margin-left: 10px;
      color: red;
      background: none;
      border: none;
      font-size: 18px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<h1>Card√°pio</h1>

<ul class="cardapio" id="listaCardapio"></ul>

<h2 id="tituloCarrinho">üõí Itens Selecionados</h2>
<ul id="carrinho"></ul>

<p id="totalPedido">Total: R$ 0,00</p>

<div class="botoes">
  <button id="btnWhatsApp">üì≤ Enviar via WhatsApp</button>
  <button id="btnPrint">üñ®Ô∏è Imprimir Pedido</button>
</div>

<script>
  const cardapio = [
    { nome: 'Churrasco em espeto', descricao: 'Acompanha arroz e farofa.', preco: 25.00 },
    { nome: 'Lasanha', descricao: 'Recheio de frango ou carne.', preco: 30.00 },
    { nome: '√Ågua Mineral', descricao: '√Ågua √© vida, sacie sua sede.', preco: 22.50 }
  ];

  const pedido = [];
  const lista = document.getElementById('listaCardapio');
  const carrinho = document.getElementById('carrinho');
  const totalPedido = document.getElementById('totalPedido');

  function atualizarCarrinho() {
    carrinho.innerHTML = '';
    let total = 0;

    pedido.forEach((item, index) => {
      const li = document.createElement('li');
      const subtotal = item.preco * item.quantidade;
      total += subtotal;

      li.innerHTML = `
        <span>${item.quantidade}x ${item.nome}</span>
        <span>
          R$ ${subtotal.toFixed(2)}
          <button onclick="removerItem(${index})" class="remover-btn">‚ùå</button>
        </span>
      `;
      carrinho.appendChild(li);
    });

    totalPedido.innerText = `Total: R$ ${total.toFixed(2).replace('.', ',')}`;
  }

  function removerItem(index) {
    pedido.splice(index, 1);
    atualizarCarrinho();
  }

  cardapio.forEach((item) => {
    const li = document.createElement('li');
    li.innerHTML = `
      <div class="info-prato">
        <p class="nome-prato">${item.nome}</p>
        <p class="descricao">${item.descricao}</p>
      </div>
      <div class="preco">R$ ${item.preco.toFixed(2)}</div>
    `;
    li.addEventListener('click', () => {
      const qtd = prompt(`Quantos "${item.nome}" deseja adicionar?`);
      const quantidade = parseInt(qtd);
      if (!isNaN(quantidade) && quantidade > 0) {
        pedido.push({ ...item, quantidade });
        atualizarCarrinho();
      }
    });
    lista.appendChild(li);
  });

  document.getElementById('btnWhatsApp').addEventListener('click', () => {
    if (pedido.length === 0) {
      alert('N√£o h√° itens no pedido para enviar.');
      return;
    }

    let mensagem = '*üìã Pedido Realizado:*\n\n';
    let total = 0;

    pedido.forEach(item => {
      const subtotal = item.preco * item.quantidade;
      mensagem += `üçΩÔ∏è *${item.nome}*\n`;
      mensagem += `Quantidade: ${item.quantidade}\n`;
      mensagem += `Valor unit√°rio: R$ ${item.preco.toFixed(2).replace('.', ',')}\n`;
      mensagem += `Subtotal: R$ ${subtotal.toFixed(2).replace('.', ',')}\n\n`;
      total += subtotal;
    });

    mensagem += `üßæ *Total a pagar:* *R$ ${total.toFixed(2).replace('.', ',')}*`;

    const numeroWhatsApp = '5591980499217';
    const linkWhatsApp = `https://wa.me/${numeroWhatsApp}?text=${encodeURIComponent(mensagem)}`;
    window.open(linkWhatsApp, '_blank');
  });

  document.getElementById('btnPrint').addEventListener('click', () => {
    if (pedido.length === 0) {
      alert('N√£o h√° itens no pedido para imprimir.');
      return;
    }

    let textoCupom = '';
    textoCupom += '        PEDIDO\n';
    textoCupom += '----------------------------------------\n';
    textoCupom += 'ITEM                QTD  VL.UNIT  SUBTOTAL\n';
    textoCupom += '----------------------------------------\n';

    let total = 0;
    pedido.forEach(item => {
      const nome = item.nome.length > 18 ? item.nome.substring(0, 18) : item.nome.padEnd(18, ' ');
      const qtd = item.quantidade.toString().padStart(3, ' ');
      const precoUni = item.preco.toFixed(2).replace('.', ',').padStart(8, ' ');
      const subtotal = (item.preco * item.quantidade).toFixed(2).replace('.', ',').padStart(8, ' ');
      textoCupom += `${nome} ${qtd} ${precoUni} ${subtotal}\n`;
      total += item.preco * item.quantidade;
    });

    textoCupom += '----------------------------------------\n';
    textoCupom += `TOTAL: R$ ${total.toFixed(2).replace('.', ',')}\n\n\n`;

    const iframe = document.createElement('iframe');
    iframe.style.display = 'none';
    document.body.appendChild(iframe);

    const doc = iframe.contentWindow.document;
    doc.open();
    doc.write(`
      <html>
      <head><title>Impress√£o</title></head>
      <body style="font-family: monospace; white-space: pre; font-size: 14px;">
        <pre>${textoCupom}</pre>
        <script>
          window.onload = function() {
            window.focus();
            window.print();
            setTimeout(() => window.close(), 500);
          };
        <\/script>
      </body>
      </html>
    `);
    doc.close();
  });
</script>

</body>
</html>